{% extends "layouts/client.html" %}

{% block title %}Carbon Trading - EcoVision{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/trading/main.css')}}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/trading/dashboardmain.css') }}" />
{% endblock %}

{% block content %}
<div id="content" class="Block-content">
  <div class="Header">
    <div class="Image">
      <img src="../../static/images/CloudTree.jpg" alt="image">
      <h1><b>EcoVision certified carbon credits</b></h1>
      <p>where your vision can make make a difference</p>
    </div>

    <div class="Sub-header">
      <p><b>EcoVision</b> sells carbon credits, which help fund climate change projects around the world, we provide the lifeline to those who are in need and strive to help the world become a better place.</p>
      <p><b>National Environmental Agency (NEA) Certified, Ministry of Sustainability and the Environment (MSE) certified</b> freeing you of any worries, and ensuring that every single penny of yours goes towards the greater good of making the world healthier than it was yesterday.</p>
      <p>Once you have purchased carbon credits, a signed letter of certification will be sent to you via your email, which is approved to use for MSE and NEA agencies!</p>
      <p><b>Find out more about carbon trading </b><a href="{{url_for('trading.about')}}">Click here</a></p>
  
      <hr>
      <div class="filter-container">
        <div class="introductory-text">
          <p>Fliter by</p>
        </div>
        <form class="filter-form" id="filterForm">
          <select id="filterSelect" name="category">
            <option value="all">All</option>
            <option {{'selected' if filter_value=='Renewable'}} value="Renewable">Renewable</option>
            <option {{'selected' if filter_value=='Conservation'}} value="Conservation">Conservation</option>
            <option {{'selected' if filter_value=='Methane'}} value="Methane">Methane</option>
          </select>
          <input type="submit" value="Filter">
        </form>
      </div>
      <div class="admin">
        {% if current_user.is_authenticated == true and (current_user.type == "admin" or current_user.type == "author") %}
          <div class="Admin">
            <p><a href="http://127.0.0.1:80/trading/projects">Add Project</a></p>
          </div>
          {% endif %}   
      </div>
      
      

      <script>
          document.getElementById("filterSelect").addEventListener("change", function() {
            document.getElementById("filterForm").submit();
          });
      </script>
      <hr>
    </div>
  </div>
  
  <div class="User-Info">
    <p>Based on your company we have some measured data.</p>
    <div class="statsbox">
      <div>
        <h4>Total Carbon Footprint Emitted</h4>
        <p>{{ overview.totalcarbonfootprint|round(5) }} CO2e</p>
      </div>
      <div>
        <h4>Exceeded Carbon Footprint</h4>
        <p>{{ overview.carbonfootprintexceeded|round(5) }} CO2e</p>
      </div>
      <div>
        <h4>Total Carbon Footprint Offset</h4>
        <p>{{ overview.carbonfootprintoffsetted|round(5) }} CO2e</p>
      </div>
    </div>
    <hr>
    <br>
  </div>

  <div class="Project-Cells">
    <h2 class="Projects">Projects</h2>
    
    <div class="Projects">
      
      <div class="projects-container">
        {% for project in projects.values() %}
          {% if filter_value == 'all' or project.type == filter_value %}
            <div class="project">
              <div class="methaneP">
                <div class="image-container">
                  <img src="../../static/images/{{ project.type }}.jpg" alt="Your Image">
                  <div class="text-overlay">
                      <h2>{{ project.type }} | {{ project.name }}</h2>
                      <p>Stock: {{ project.stock }} Price(SGD): {{ project.price }}</p>
                      <p><a href="{{ url_for('trading.project', project=project.id) }}" class="project-link">View Project</a></p>
                  </div>
                </div>
                <p><a href="{{ url_for('trading.project', project=project.id) }}" class="view-link" >View project now</a> <br> <B> {{ project.type }} </B> </p>
              </div>
            </div> 
          {% endif %}
        {% endfor %}
      </div>
      
      <hr>
    </div>
  </div>



<!-- <div class="Footer">
  <ul>
    <li><a href="http://127.0.0.1/">Home</a></li>
    <li><a href="http://127.0.0.1/trading/Checkout">Checkout</a></li>
    <li><a href="http://127.0.0.1/contact">Email</a></li>
    <li><a href="http://127.0.0.1/client/account">Account</a></li>
    <li>
      <p>üçÄ</p>
    </li>
  </ul>
</div> -->
</div>
{% endblock %}